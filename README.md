# Pet Namer API

ä¸€ä¸ªåŸºäº DeepSeek AI çš„å® ç‰©å‘½å API æœåŠ¡ï¼Œä½¿ç”¨ Next.js æ„å»ºå¹¶éƒ¨ç½²åœ¨ Vercel ä¸Šã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¾ ä¸ºä¸åŒæ€§æ ¼çš„å® ç‰©ç”Ÿæˆä¸ªæ€§åŒ–åå­—
- ğŸ¤– åŸºäº DeepSeek AI çš„æ™ºèƒ½å‘½å
- ğŸš€ å¿«é€Ÿå“åº”ï¼Œæ”¯æŒ CORS
- ğŸ“± ç®€å•æ˜“ç”¨çš„ REST API

## æœ¬åœ°å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp env.example .env.local
```

2. ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ DeepSeek API å¯†é’¥ï¼š
```
DEEPSEEK_API_KEY=your_actual_api_key_here
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:3000 æŸ¥çœ‹åº”ç”¨ã€‚

### æµ‹è¯• API

```bash
node test-api.js
```

## Vercel éƒ¨ç½²

### 1. ç¯å¢ƒå˜é‡é…ç½®

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­ï¼Œå¿…é¡»é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥ Vercel æ§åˆ¶å°
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. ç‚¹å‡» "Settings" â†’ "Environment Variables"
4. æ·»åŠ å˜é‡ï¼š
   - **Name**: `DEEPSEEK_API_KEY`
   - **Value**: ä½ çš„ DeepSeek API å¯†é’¥
   - **Environment**: Production, Preview, Development (å…¨é€‰)

### 2. å¸¸è§éƒ¨ç½²é—®é¢˜æ’æŸ¥

#### é—®é¢˜ 1: API è¿”å› 500 é”™è¯¯
**åŸå› **: ç¯å¢ƒå˜é‡æœªé…ç½®æˆ–é…ç½®é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: 
- æ£€æŸ¥ Vercel ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
- ç¡®ä¿ API å¯†é’¥æœ‰æ•ˆ
- æŸ¥çœ‹ Vercel å‡½æ•°æ—¥å¿—

#### é—®é¢˜ 2: API æ— æ³•è®¿é—®
**åŸå› **: è·¯ç”±é…ç½®é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ `pages/api/generate.js` æ–‡ä»¶å­˜åœ¨
- æ£€æŸ¥ `vercel.json` é…ç½®

#### é—®é¢˜ 3: CORS é”™è¯¯
**åŸå› **: è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢
**è§£å†³æ–¹æ¡ˆ**:
- ä»£ç ä¸­å·²åŒ…å« CORS é…ç½®
- æ£€æŸ¥ `next.config.js` ä¸­çš„ headers é…ç½®

### 3. éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. è®¿é—®ä½ çš„ Vercel åŸŸå
2. ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆä¿®æ”¹ URLï¼‰ï¼š
```bash
# ä¿®æ”¹ test-api.js ä¸­çš„ API_URL
const API_URL = 'https://your-domain.vercel.app/api/generate';
node test-api.js
```

3. ä½¿ç”¨ curl æµ‹è¯•ï¼š
```bash
curl -X POST https://your-domain.vercel.app/api/generate \
  -H "Content-Type: application/json" \
  -d '{"type": "çŒ«", "personality": "å¯çˆ±"}'
```

## API æ–‡æ¡£

### ç«¯ç‚¹

`POST /api/generate`

### è¯·æ±‚æ ¼å¼

```json
{
  "type": "å® ç‰©ç±»å‹ï¼Œå¦‚çŒ«/ç‹—",
  "personality": "å® ç‰©æ€§æ ¼ï¼Œå¦‚å¯çˆ±/é«˜å†·"
}
```

### å“åº”æ ¼å¼

```json
{
  "name": "èµ·çš„åå­—",
  "status": 200
}
```

### ç¤ºä¾‹

**è¯·æ±‚**:
```bash
curl -X POST https://your-domain.vercel.app/api/generate \
  -H "Content-Type: application/json" \
  -d '{"type": "çŒ«", "personality": "å¯çˆ±"}'
```

**å“åº”**:
```json
{
  "name": "å°å’ª - å¯çˆ±çš„å°çŒ«å’ª",
  "status": 200
}
```

## æ•…éšœæ’é™¤

### æœ¬åœ°è¿è¡Œæ­£å¸¸ï¼ŒVercel æ— æ³•è®¿é—®

1. **æ£€æŸ¥ç¯å¢ƒå˜é‡**ï¼š
   - ç™»å½• Vercel æ§åˆ¶å°
   - è¿›å…¥é¡¹ç›®è®¾ç½® â†’ Environment Variables
   - ç¡®ä¿ `DEEPSEEK_API_KEY` å·²æ­£ç¡®è®¾ç½®

2. **æ£€æŸ¥éƒ¨ç½²æ—¥å¿—**ï¼š
   - åœ¨ Vercel æ§åˆ¶å°æŸ¥çœ‹å‡½æ•°æ—¥å¿—
   - å¯»æ‰¾é”™è¯¯ä¿¡æ¯

3. **æµ‹è¯• API ç«¯ç‚¹**ï¼š
   - ç›´æ¥è®¿é—® `https://your-domain.vercel.app/api/generate`
   - åº”è¯¥è¿”å› 405 é”™è¯¯ï¼ˆå› ä¸ºä¸æ˜¯ POST è¯·æ±‚ï¼‰

4. **æ£€æŸ¥ç½‘ç»œè¯·æ±‚**ï¼š
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯

### å¸¸è§é”™è¯¯ä»£ç 

- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œé€šå¸¸æ˜¯ç¯å¢ƒå˜é‡é—®é¢˜
- **405**: æ–¹æ³•ä¸å…è®¸ï¼Œæ­£å¸¸ï¼ˆå› ä¸ºè®¿é—®çš„æ˜¯ GET è¯·æ±‚ï¼‰
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **401**: API å¯†é’¥æ— æ•ˆ

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 14
- **éƒ¨ç½²**: Vercel
- **AI æœåŠ¡**: DeepSeek API
- **è¯­è¨€**: JavaScript

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åˆ›å»º GitHub Issue æˆ–è”ç³»å¼€å‘è€…ã€‚ 